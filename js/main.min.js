var linkForm=document.querySelector(".write-us-link"),popupForm=document.querySelector(".modal-write-us"),closeForm=popupForm.querySelector(".modal-close"),form=popupForm.querySelector("form"),userName=popupForm.querySelector("[name=name]"),userEmail=popupForm.querySelector("[name=email]"),userText=popupForm.querySelector("[name=text]"),linkMap=document.querySelector(".contacts-map"),popupMap=document.querySelector(".modal-map"),closeMap=popupMap.querySelector(".modal-close"),isStorageSupport=!0,storage={name:"",email:""};try{storage.name=localStorage.getItem("userName"),storage.email=localStorage.getItem("userEmail")}catch(e){isStorageSupport=!1}linkForm.addEventListener("click",function(e){e.preventDefault(),popupForm.classList.add("modal-show"),storage.name?(userName.value=storage.name,storage.email?(userEmail.value=storage.email,userText.focus()):userEmail.focus()):userName.focus()}),closeForm.addEventListener("click",function(e){e.preventDefault(),popupForm.classList.remove("modal-show"),popupForm.classList.remove("modal-error")}),form.addEventListener("submit",function(e){userName.value&&userEmail.value&&userText.value?isStorageSupport&&(localStorage.setItem("userName",userName.value),localStorage.setItem("userEmail",userEmail.value)):(e.preventDefault(),popupForm.classList.remove("modal-error"),popupForm.offsetWidth=popupForm.offsetWidth,popupForm.classList.add("modal-error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),popupForm.classList.contains("modal-show")&&(popupForm.classList.remove("modal-show"),popupForm.classList.remove("modal-error")),popupMap.classList.contains("modal-show")&&popupMap.classList.remove("modal-show"))}),linkMap.addEventListener("click",function(e){e.preventDefault(),popupMap.classList.add("modal-show")}),closeMap.addEventListener("click",function(e){e.preventDefault(),popupMap.classList.remove("modal-show")});